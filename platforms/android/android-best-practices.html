---
layout: page
title: Android Best Practices
type: page
parent: Android
---
<h2>General Notes</h2>
<ul>
<li>Follow the <a href="http://source.android.com/source/code-style.html">Android Code Style Guidelines</a>.</li>
</ul>
<h2>Debugging</h2>
<ul>
<li>Use <code>Mat.toString()</code> and <code>Mat.dump()</code> methods for debugging.</li>
<li>If you develop in C++, debug your code on a host. But be aware of the performance difference. We recommend to develop/debug/optimize C++ code on a host, but please check the real speed of application on a device.</li>
</ul>
<h2>Performance</h2>
<h3>Memory</h3>
<p>Memory efficiency should be your first concern. As we all know, memory reallocations are deadly for the device accumulator, so try to avoid them.</p>
<ol>
<li>Avoid excessive memory allocations and copyings.</li>
<li>Initialize all the matrices at the application start and reuse them later. Please note that if the matrix doesn't have required size and depth, OpenCV will reallocate it before usage.Â  Simply create all the matrices with appropriate size and depth for every purpose beforehand and use them everywhere.</li>
</ol>
<h3>JNI calls</h3>
<ol>
<li>Don't use too many calls to OpenCV Java API, because JNI-calls are really expensive. For example if you want to fill your image with zeros, don't use <code>put</code> method, call the <code>Mat.setTo()</code> instead.</li>
<li>Be careful with OpenCV calls within loops. Better to prepare everything outside the loop and to avoid repetitive JNI-calls.</li>
</ol>
